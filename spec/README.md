# SIMAP OpenAPI Specification

This directory contains the OpenAPI specifications for the SIMAP API.

## Files

- `simap.yaml`
  - This is the **pinned, authoritative specification** used by this project to generate the TypeScript client.
  - It should only be updated deliberately via the process described below.

- `simap.upstream.yaml`
  - This file is a temporary copy of the **latest specification** fetched directly from the official SIMAP API endpoint.
  - It is generated by the `scripts/fetch-spec.ts` script and is used by the `drift.yml` GitHub Actions workflow to detect changes against our pinned `simap.yaml`.

## Update Process

A GitHub Actions workflow (`.github/workflows/drift.yml`) runs daily to detect changes:

1.  It runs the `scripts/fetch-spec.ts` script to get the latest upstream spec.
2.  It compares `simap.upstream.yaml` with our pinned `simap.yaml`.
3.  If a difference is detected, it creates a pull request with the proposed changes to `simap.yaml` and the newly generated client code.
4.  This allows us to review API changes before they are incorporated into the client.
